<script>
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('submitBtn');
    const input = document.getElementById('inputField');
    const output = document.getElementById('responseOutput');

    button.addEventListener('click', async () => {
      const inputData = input.value;
      output.textContent = '🧠 Thinking...';

      try {
        const response = await fetch('https://free-web-ai-backend.vercel.app/api/process', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ inputData })
        });

        const data = await response.json();

        // 🖼 If it's an image task
        if (data.result && data.result.image) {
          output.innerHTML = `<p><strong>${data.message}</strong></p><img src="${data.result.image}" alt="Generated Image" style="max-width: 100%;">`;
        }
        // 📝 If it's a summary or text
        else if (Array.isArray(data.result) && data.result[0]?.summary_text) {
          output.innerHTML = `<p><strong>${data.message}</strong></p><p>${data.result[0].summary_text}</p>`;
        }
        // 🔁 Generic fallback
        else {
          output.textContent = JSON.stringify(data, null, 2);
        }
      } catch (error) {
        console.error('Error:', error);
        output.textContent = '❌ Error talking to the AI backend.';
      }
    });
  });
</script>
